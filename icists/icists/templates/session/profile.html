{% extends "session/base.html" %}

{% block htitle %}ICISTS Profile{% endblock %}

{% block header %}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/session.css">
<link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
<script src="{{ MEDIA_URL }}js/validator.min.js"></script>
{% endblock %}

{% block content %}
<h1>ICISTS Profile</h1>
<form class="form-horizontal" action="/session/signup/" method="post" enctype="multipart/form-data" data-toggle="validator">
	<fieldset>
        {% csrf_token %}
        <div class="form-group">
			<label class="col-sm-3 control-label">Email</label>
			<div class="col-sm-9">
				<input type="email" class="form-control" name="email" placeholder="asdf@example.com" required="required" maxlength="50" value="{{ user.email }}">
            </div>
        </div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Name</label>
			<div class="form-group col-sm-6">
				<input type="text" class="form-control" name="first_name" placeholder="First Name" required="required" maxlength="30" value="{{ user.first_name }}">
			</div>
			<div class="form-group col-sm-3">
				<input type="text" class="form-control" name="last_name" placeholder="Last Name" required="required" maxlength="30" value="{{ user.last_name }}">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Gender, Birthday</label>
			<div class="form-group col-sm-3">
				<label class="radio-inline">
					<input type="radio" id="gender-options" name="gender" value="male" required="required">Male
				</label>
				<label class="radio-inline">
					<input type="radio" id="gender-options" name="gender" value="female" required="required">Female
				</label>
			</div>
			<div class="form-group col-sm-6">
				<input type="text" class="form-control" name="birthday" placeholder="Birthday" required="required" value="{{ userprofile.birthday|date:'Y-m-d' }}">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Nationality</label>
			<div class="col-sm-9">
				<select class="form-control" name="nationality" required="required"></select>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">University, Major</label>
			<div class="form-group col-sm-6">
				<input type="text" class="form-control" name="university" placeholder="University" required="required" maxlength="70" value="{{ userprofile.university }}">
			</div>
			<div class="form-group col-sm-3">
				<input type="text" class="form-control" name="major" placeholder="Major" required="required" maxlength="45" value="{{ userprofile.major }}">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Phone</label>
			<div class="col-sm-9">
				<input type="text" class="form-control" name="phone" placeholder="Phone" required="required" value="+93" maxlength="45" value="{{ userprofile.phone }}">
				<p class="help-block">example: +821012345678</p>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Picture</label>
			<div class="col-sm-9">
				<input type="file" class="form-control" name="picture" required="required">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">How You Found Us</label>
			<div class="col-sm-9">
				<input type="text" class="form-control" name="how_you_found_us" placeholder="How You Found Us?" required="required" maxlength="100" value="{{ userprofile.how_you_found_us }}">
			</div>
		</div>
        <div class="form-group">
            <div class="col-sm-12">
                <button type="submit" class="btn btn-primary">Submit</button>
                <a class="btn btn-warning" href="/session/login/">Login</a>
            </div>
        </div>
    </fieldset>
</form>

<pre id="country-phone" style="display:none;">
Afghanistan,93;Albania,355;Algeria,213;American Samoa,1684;Andorra,376;Angola,244;Anguilla,1264;Antarctica,672;Antigua and Barbuda,1268;Argentina,54;Armenia,374;Aruba,297;Australia,61;Austria,43;Azerbaijan,994;Bahamas,1242;Bahrain,973;Bangladesh,880;Barbados,1246;Belarus,375;Belgium,32;Belize,501;Benin,229;Bermuda,1441;Bhutan,975;Bolivia,591;Bosnia and Herzegovina,387;Botswana,267;Brazil,55;British Indian Ocean Territory,246;British Virgin Islands,1284;Brunei,673;Bulgaria,359;Burkina Faso,226;Burundi,257;Cambodia,855;Cameroon,237;Canada,1;Cape Verde,238;Cayman Islands,1345;Central African Republic,236;Chad,235;Chile,56;China,86;Christmas Island,61;Cocos Islands,61;Colombia,57;Comoros,269;Cook Islands,682;Costa Rica,506;Croatia,385;Cuba,53;Curacao,599;Cyprus,357;Czech Republic,420;Democratic Republic of the Congo,243;Denmark,45;Djibouti,253;Dominica,1767;Dominican Republic,1809, 1829, 1849;East Timor,670;Ecuador,593;Egypt,20;El Salvador,503;Equatorial Guinea,240;Eritrea,291;Estonia,372;Ethiopia,251;Falkland Islands,500;Faroe Islands,298;Fiji,679;Finland,358;France,33;French Polynesia,689;Gabon,241;Gambia,220;Georgia,995;Germany,49;Ghana,233;Gibraltar,350;Greece,30;Greenland,299;Grenada,1473;Guam,1671;Guatemala,502;Guernsey,441481;Guinea,224;GuineaBissau,245;Guyana,592;Haiti,509;Honduras,504;Hong Kong,852;Hungary,36;Iceland,354;India,91;Indonesia,62;Iran,98;Iraq,964;Ireland,353;Isle of Man,441624;Israel,972;Italy,39;Ivory Coast,225;Jamaica,1876;Japan,81;Jersey,441534;Jordan,962;Kazakhstan,7;Kenya,254;Kiribati,686;Kuwait,965;Kyrgyzstan,996;Laos,856;Latvia,371;Lebanon,961;Lesotho,266;Liberia,231;Libya,218;Liechtenstein,423;Lithuania,370;Luxembourg,352;Macao,853;Macedonia,389;Madagascar,261;Malawi,265;Malaysia,60;Maldives,960;Mali,223;Malta,356;Marshall Islands,692;Mauritania,222;Mauritius,230;Mayotte,262;Mexico,52;Micronesia,691;Moldova,373;Monaco,377;Mongolia,976;Montenegro,382;Montserrat,1664;Morocco,212;Mozambique,258;Myanmar,95;Namibia,264;Nauru,674;Nepal,977;Netherlands,31;Netherlands Antilles,599;New Caledonia,687;New Zealand,64;Nicaragua,505;Niger,227;Nigeria,234;Niue,683;North Korea,850;Northern Mariana Islands,1670;Norway,47;Oman,968;Pakistan,92;Palau,680;Panama,507;Papua New Guinea,675;Paraguay,595;Peru,51;Philippines,63;Pitcairn,64;Poland,48;Portugal,351;Puerto Rico,1787, 1939;Qatar,974;Republic of the Congo,242;Reunion,262;Romania,40;Russia,7;Rwanda,250;Saint Barthelemy,590;Saint Helena,290;Saint Kitts and Nevis,1869;Saint Lucia,1758;Saint Martin,590;Saint Pierre and Miquelon,508;Saint Vincent and the Grenadines,1784;Samoa,685;San Marino,378;Sao Tome and Principe,239;Saudi Arabia,966;Senegal,221;Serbia,381;Seychelles,248;Sierra Leone,232;Singapore,65;Sint Maarten,1721;Slovakia,421;Slovenia,386;Solomon Islands,677;Somalia,252;South Africa,27;South Korea,82;Spain,34;Sri Lanka,94;Sudan,249;Suriname,597;Svalbard and Jan Mayen,47;Swaziland,268;Sweden,46;Switzerland,41;Syria,963;Taiwan,886;Tajikistan,992;Tanzania,255;Thailand,66;Togo,228;Tokelau,690;Tonga,676;Trinidad and Tobago,1868;Tunisia,216;Turkey,90;Turkmenistan,993;Turks and Caicos Islands,1649;Tuvalu,688;U.S. Virgin Islands,1340;Uganda,256;Ukraine,380;United Arab Emirates,971;United Kingdom,44;United States,1;Uruguay,598;Uzbekistan,998;Vanuatu,678;Vatican,379;Venezuela,58;Vietnam,84;Wallis and Futuna,681;Western Sahara,212;Yemen,967;Zambia,260;Zimbabwe,263;
</pre>
<script type="text/javascript">
$(function() {
	var map = $.trim($("#country-phone").text()).split(";");
	$.each(map, function(i, item) {
		var p = item.split(",");
		$("select[name=nationality]").append($('<option>', {
			value: p[0], text: p[0]
		}));
	});
	
	$("select[name=nationality]").change(function() {
		var v = $("select[name=nationality]").val();
		$.each(map, function(i, item) {
			var p = item.split(",");
			if (p[0] == v)
				$("input[name=phone]").val("+" + p[1]);
		});
	});

	$('input[name=phone]').keypress(function(e) {
		var regex = new RegExp("^[\ \(\)\+\-0123456789]+$");
		var key = String.fromCharCode(e.keyCode);
		if (!regex.test(key)) {
			e.preventDefault();
			return false;
		}
	});
	
	$("input[name=birthday]").datepicker({
		dateFormat: "yy-mm-dd"	
	});
});
</script>
{% endblock %}

